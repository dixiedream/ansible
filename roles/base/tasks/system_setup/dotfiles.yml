- name: system setup | dotfiles | Clone repo 
  become_user: ale
  git:
    bare: yes
    repo: https://github.com/dixiedream/dotfiles.git
    dest: "{{ dotfile_src }}"

- name: system setup | dotfiles | Setup repo
  become_user: ale
  command: "git --git-dir={{ dotfile_src }} --work-tree='{{ user_home}}' checkout -f dwm"

- name: system setup | dotfiles | Setup repo
  become_user: ale
  command: "git --git-dir={{ dotfile_src }} --work-tree='{{ user_home}}' config --local status.showUntrackedFiles no"

- name: system setup | dotfiles | Setup repo
  become_user: ale
  command: "git --git-dir={{ dotfile_src }} --work-tree='{{ user_home}}' config remote.origin.url 'git@github.com:dixiedream/dotfiles.git'"

- name: system setup | dotfiles | Setup repo
  become_user: ale
  command: "git --git-dir={{ dotfile_src }} --work-tree='{{ user_home}}' config remote.origin.fetch 'refs/heads/*:refs/remotes/origin/*'"

- name: system setup | dotfiles | Change browser env var (Debian)
  lineinfile:
    dest: "{{ user_home }}/.zprofile"
    regexp: '^BROWSER='
    line: 'export BROWSER="brave-browser"'
  when: ansible_os_family == "Debian"
