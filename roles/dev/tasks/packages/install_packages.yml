- name: packages | install required packages (Linux)
  become: true
  package:
    name:
      - docker
      - docker-compose
      - npm
      - php
      - ripgrep
    state: latest
  when: ansible_system == "Linux"

- name: packages | install required packages (MacOS)
  homebrew:
    name:
      - docker
      - docker-compose
      - node
      - npm
      - php
      - ripgrep
    state: latest
  when: ansible_os_family == "Darwin"

- name: packages | ensure docker service is not enabled (Linux)
  become: true
  service:
    name: docker
    state: stopped
    enabled: no
  when: ansible_system == "Linux"

- name: packages | ensure containerd service is not enabled (Linux)
  become: true
  service:
    name: containerd
    state: stopped
    enabled: no
  when: ansible_system == "Linux"

- name: packages | ensure systemd networkd wait online service is not enabled (Linux)
  become: true
  service:
    name: systemd-networkd-wait-online
    state: stopped
    enabled: no
  when: ansible_system == "Linux"

- name: users | ale | ensure ale is in docker group (Debian)
  become: true
  user:
    name: ale
    groups: docker
    append: yes
  when: ansible_os_family == "Debian"

# - name: packages | ensure php service is not enabled
#   service:
#     name: php8.1-fpm
#     state: stopped
#     enabled: no
